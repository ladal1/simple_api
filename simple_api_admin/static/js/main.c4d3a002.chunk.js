(this.webpackJsonpfrontend_br_simple_api=this.webpackJsonpfrontend_br_simple_api||[]).push([[0],{82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(19),r=n.n(s),c=n(14),o=n(15),l=n(12),d=n(17),u=n(16),h=n(96),j=n(99),p=n(88),f=n(69),b=n(2);var m=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"action_card",value:function(e,t){return Object(b.jsx)(h.a,{children:Object(b.jsxs)(j.a,{className:t,children:[Object(b.jsx)(j.a.Header,{children:Object(b.jsx)(h.a.Toggle,{as:j.a.Header,variant:"link",eventKey:"0",children:e.name})}),Object(b.jsx)(h.a.Collapse,{eventKey:"0",children:Object(b.jsx)(j.a.Body,{children:"Hello! I'm the body"})})]})},e.name)}},{key:"render",value:function(){var e=this;if(null===this.props.schema)return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("strong",{children:"Could not obtain schema, check your connection to the API, then refresh"})});var t=function(e){var t=[];return null===e?{}:(e.__objects.forEach((function(e){return e.actions.forEach((function(e){t.push(e)}))})),{object:t,general:e.__actions})}(this.props.schema),n=[];return t.general.forEach((function(t){n.push(e.action_card(t,"bg-object"))})),t.object.forEach((function(t){n.push(e.action_card(t,"bg-action"))})),Object(b.jsx)(b.Fragment,{children:n})}}]),n}(i.a.Component),v=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)(p.a,{className:"flex-grow-1 overflow-hidden",children:Object(b.jsx)(f.a,{sm:12,className:"p-4 mh-100",children:Object(b.jsx)(m,{schema:this.props.schema})})})}}]),n}(i.a.Component),g=n(101),O=n(93),y=n(70),x=n(89),_=n(94),k=n(102),S=n(90),C=n(71),w=n(100);function N(e){return JSON.stringify(e)}function T(e){var t=Number(e);if(isNaN(t))throw new Error("Value is not a number");return t}function A(e){switch(e){case"true":return!0;case"false":return!1;default:throw new Error("Invalid value in field")}}function F(e,t){try{if("!"===t[t.length-1]){if(t=t.slice(0,-1),null===e||void 0===e)return N(e)}else if(null===e||void 0===e)return null;if("["===t[0]&&"]"===t[t.length-1]){var n=[];return JSON.parse(e).forEach((function(e){return n.push(F(e,t.slice(1,-1)))})),"["+n.join(", ")+"]"}switch(t){case"Integer":case"Float":return T(e);case"String":return N(e);case"Boolean":return A(e);case"Date":case"Time":case"Datetime":case"Duration":default:return N(e)}}catch(a){return N(e)}}function q(e,t){console.log(e,t);try{if("!"===t[t.length-1]){if(t=t.slice(0,-1),null===e||void 0===e)return!1}else if(null===e||void 0===e)return!0;if("["===t[0]&&"]"===t[t.length-1]){var n=JSON.parse(e);if(console.log(n),!Array.isArray(n))return!1;for(var a=0;a<n.length;a++)if(!q(n[a],t.slice(1,-1)))return!1;return!0}switch(t){case"Integer":case"Float":T(e);break;case"String":N(e);break;case"Boolean":A(e);break;case"Date":case"Time":case"Datetime":case"Duration":default:return null}return!0}catch(i){return!1}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n="!"!==e[e.length-1];n||(e=e.slice(0,-1));var a=t.find((function(t){return t.typename===e}));if("undefined"!==typeof a)return{field:"Select",required:n,options:a.fields,placeholder:"Add Filter: ",spawn_fields:!0};switch(e){case"Integer":case"Float":return{field:"Number",required:n};case"String":return{field:"Text",required:n};case"Boolean":return{field:"Select",required:n,options:[{name:"true"},{name:"false"}],placeholder:"Select Bool",spawn_fields:!1};case"Date":case"Time":case"Datetime":case"Duration":default:return{field:"Text",required:n}}}var V=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){for(var e=this.props.path,t=[],n=0;n<e.length;n++)t.push(Object(b.jsx)(w.a.Item,{active:n===e.length-1,children:e[n]},n));return Object(b.jsx)("div",{children:Object(b.jsx)(w.a,{children:t})})}}]),n}(i.a.Component);function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};fetch("../api/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":K()},credentials:"include",body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return t(e),e})).catch((function(e){return n(e.text)}))}function D(e,t,n){fetch("./login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":K()},credentials:"include",body:JSON.stringify({operation:"logout"})}).then((function(e){return e.json()})).then((function(a){return P(e,a,t,n)})).catch((function(e){return n(e.text)}))}function P(e,t,n,a){console.log(t),t.success?n(e):a(t.reason)}function L(e,t){return"__typename"===e?void 0:t}function B(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var i=n[a].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}return t}function J(e,t){var n=new Date;n.setTime(n.getTime()+6048e5),document.cookie=e+"="+t+"; expires="+n.toUTCString()}function K(){return B("csrftoken")}function U(e,t,n){var a=[],i=[];for(var s in t)if(!t[s].not_include)if(0===Object.entries(t[s].additional_fields).length)a.push(s+": "+F(t[s].value,t[s].datatype));else{var r=[];for(var c in t[s].additional_fields)r.push(c+": "+F(t[s].additional_fields[c].value,t[s].additional_fields[c].datatype));a.push(s+": {"+r.join(", ")+"}")}for(var o in n)if(!n[o].not_include)if(0===Object.entries(n[o].additional_fields).length)i.push(o+": "+F(n[o].value,n[o].datatype));else{var l=[];for(var d in n[o].additional_fields)l.push(d+": "+F(n[o].additional_fields[d].value,n[o].additional_fields[d].datatype));i.push(o+": {"+l.join(", ")+"}")}if(0===a.length&&0===i.length)return e+"\n{\n  #Data you want to receive back\n}";var u=a.join(", ")+(0===a.length||0===i.length?"":", ")+(0===i.length?"":"data: {"+i.join(", ")+"}");return""!==u&&(u="("+u+")"),e+u+"\n{\n  #Data you want to receive back\n}"}var H=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={activeObject:null},a}return Object(o.a)(n,[{key:"changeActive",value:function(e){this.props.activeChange(e),this.setState({activeObject:e})}},{key:"render_item",value:function(e){var t=this;return Object(b.jsx)(g.a.Item,{active:this.state.activeObject===e,action:!0,onClick:function(){t.changeActive(e)},children:e},e)}},{key:"render",value:function(){var e=this,t=[];return null!==this.props.schema&&void 0!==this.props.schema&&(this.props.schema.__actions.length>0&&t.push(Object(b.jsx)(g.a.Item,{action:!0,active:null===this.state.activeObject,onClick:function(){e.changeActive(null)},className:"bg-object text-dark",children:"Unassigned"},"__unassigned_actions")),this.props.schema.__objects.forEach((function(n){t.push(e.render_item(n.name))}))),Object(b.jsxs)("div",{children:[Object(b.jsx)("h6",{className:"mx-3 m-2",children:"Objects:"}),Object(b.jsx)(g.a,{children:t})]})}}]),n}(i.a.Component),Q=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e,a){var i;return Object(c.a)(this,n),(i=t.call(this,e,a)).state={show:null},i.handleShow=i.handleShow.bind(Object(l.a)(i)),i.handleClose=i.handleClose.bind(Object(l.a)(i)),i}return Object(o.a)(n,[{key:"handleClose",value:function(){this.setState({show:null})}},{key:"handleShow",value:function(e){this.setState({show:e})}},{key:"create_modal",value:function(e){return Object(b.jsx)(O.a,{show:this.state.show===e.name,onHide:this.handleClose,dialogClassName:"query-dialog",contentClassName:"query-dialog",children:Object(b.jsx)(R,{action:e,schema:this.props.schema,object:this.props.object})},e.name)}},{key:"render_action",value:function(e){var t=this;return Object(b.jsx)(y.a,{variant:"primary",onClick:function(){t.handleShow(e.name)},className:"m-4",children:e.name},e.name)}},{key:"render",value:function(){var e=this;if(null===this.props.schema||void 0===this.props.schema)return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("strong",{children:"Could not obtain schema, check your connection to the API, then refresh"})});if(this.buttons=[],this.modals=[],this.props.object){var t=this.props.schema.__objects.find((function(t){return t.name===e.props.object}));"undefined"!==typeof t&&t.actions.forEach((function(t){e.buttons.push(e.render_action(t)),e.modals.push(e.create_modal(t))}))}else if(null===this.props.object){var n=this.props.schema.__actions;"undefined"!==typeof n&&n.forEach((function(t){e.buttons.push(e.render_action(t)),e.modals.push(e.create_modal(t))}))}return Object(b.jsxs)("div",{children:[this.buttons,this.modals]})}}]),n}(i.a.Component),R=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e,a){var i;Object(c.a)(this,n),(i=t.call(this,e,a)).capture_tab=function(e){if(9===e.keyCode){e.preventDefault();var t=e.target,n=t.selectionStart,a=t.selectionEnd,i=t.value;t.value=i.substring(0,n)+"  "+i.substring(a),t.selectionStart=t.selectionEnd=n+2}};var s=i.props.action,r={},o={};return"parameters"in s&&s.parameters.forEach((function(e){r[e.name]={defaultValue:"default"in e?e.default:"",value:"",datatype:e.typename,validity:null,not_include:!1,additional_fields:{}}})),"data"in s&&s.data.forEach((function(e){o[e.name]={defaultValue:"default"in e?e.default:"",value:"",datatype:e.typename,validity:null,not_include:!1,additional_fields:{}}})),i.state={action:i.props.action,parameters:r,data:o,query:"",response:""},i.handleChangeQuery=i.handleChangeQuery.bind(Object(l.a)(i)),i.update_response=i.update_response.bind(Object(l.a)(i)),i.handleChangeFields=i.handleChangeFields.bind(Object(l.a)(i)),i.send_query=i.send_query.bind(Object(l.a)(i)),i.send_mutation=i.send_mutation.bind(Object(l.a)(i)),i.handleIgnoreProperty=i.handleIgnoreProperty.bind(Object(l.a)(i)),i}return Object(o.a)(n,[{key:"handleChangeFields",value:function(e,t,n){var a={parameters:this.state.parameters,data:this.state.data};a[t][e].value=n.target.value,a.query=U(this.state.action.name,a.parameters,a.data,this.props.schema),this.setState(a),this.fieldTypeValidation(e,n.target.value,t)}},{key:"handleChangeCustomProperty",value:function(e,t,n,a){var i={parameters:this.state.parameters,data:this.state.data};i[n][e].additional_fields[t].value=a.target.value,i.query=U(this.state.action.name,i.parameters,i.data,this.props.schema),this.setState(i),this.additionalFieldTypeValidation(e,t,a.target.value,n)}},{key:"handleIgnoreProperty",value:function(e,t,n){var a={parameters:this.state.parameters,data:this.state.data};a[t][e].not_include=n.target.checked,a.query=U(this.state.action.name,a.parameters,a.data,this.props.schema),n.target.checked?(a[t][e].validity=null,this.setState(a)):(this.setState(a),this.fieldTypeValidation(e,this.state[t][e].value,t))}},{key:"deleteAdditionalField",value:function(e,t,n){var a={parameters:this.state.parameters,data:this.state.data};delete a[t][e].additional_fields[n],a.query=U(this.state.action.name,a.parameters,a.data,this.props.schema),this.setState(a)}},{key:"addAdditionalField",value:function(e,t,n,a){var i={parameters:this.state.parameters,data:this.state.data};i[t][e].additional_fields[a.target.value]={datatype:n,value:"",validity:null},i.query=U(this.state.action.name,i.parameters,i.data,this.props.schema),this.setState(i)}},{key:"additionalFieldTypeValidation",value:function(e,t,n,a){var i={parameters:this.state.parameters,data:this.state.data};i[a][e].additional_fields[t].validity=q(n,i[a][e].additional_fields[t].datatype),this.setState(i)}},{key:"fieldTypeValidation",value:function(e,t,n){var a={parameters:this.state.parameters,data:this.state.data};a[n][e].validity=q(t,a[n][e].datatype),this.setState(a)}},{key:"handleChangeQuery",value:function(e){this.setState({query:e.target.value})}},{key:"update_response",value:function(e){console.log(e),"data"in e||"errors"in e?this.setState({response:JSON.stringify(e,L,2)}):"string"===typeof e&&this.setState({response:e})}},{key:"send_query",value:function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};console.log(e),E(e="{"+e+"}",t)}(this.state.query,this.update_response)}},{key:"send_mutation",value:function(){!function(e){E(e="mutation simple_mutate{"+e+"}",arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){})}(this.state.query,this.update_response)}},{key:"componentDidMount",value:function(){this.setState({query:U(this.state.action.name,this.state.parameters,this.state.data,this.props.schema)})}},{key:"createSubField",value:function(e,t,n,a,i,s,r){if(["Text","Number","Time"].includes(t.field))return Object(b.jsxs)(x.a,{children:[Object(b.jsx)(_.a.Control,{type:t.field,isValid:n,isInvalid:a,placeholder:i,onChange:s}),Object(b.jsx)(x.a.Append,{children:Object(b.jsx)(y.a,{variant:"outline-secondary p-0",onClick:r,children:Object(b.jsx)("i",{className:"bi bi-x text-danger remove-field-x"})})})]},e);if("Select"===t.field){var c=[Object(b.jsx)("option",{disabled:!0,hidden:!0,value:"Select...",children:"Select..."},"__Null_NonSelection")];return Object.keys(t.options).forEach((function(e){return c.push(Object(b.jsx)("option",{children:t.options[e].name},t.options[e].name))})),Object(b.jsxs)(x.a,{children:[Object(b.jsx)(_.a.Control,{as:t.field.toLowerCase(),isValid:n,isInvalid:a,defaultValue:"Select...",onChange:s,children:c}),Object(b.jsx)(x.a.Append,{children:Object(b.jsx)(y.a,{variant:"outline-secondary p-0",onClick:r,children:Object(b.jsx)("i",{className:"bi bi-x text-danger remove-field-x"})})})]},e)}}},{key:"create_field",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=I(n,i);if("Select"===s.field){var r=[];Object.keys(this.state[t][e].additional_fields).forEach((function(n){r.push(a.createSubField(n,I(a.state[t][e].additional_fields[n].datatype),null!==a.state[t][e].additional_fields[n].validity&&a.state[t][e].additional_fields[n].validity,null!==a.state[t][e].additional_fields[n].validity&&!a.state[t][e].additional_fields[n].validity,n,(function(i){a.handleChangeCustomProperty(e,n,t,i)}),(function(){a.deleteAdditionalField(e,t,n)})))}));var c=[Object(b.jsx)("option",{disabled:!0,hidden:!0,value:s.placeholder,children:s.placeholder},"__Null_NonSelection")];return s.options.forEach((function(e){c.push(Object(b.jsx)("option",{children:e.name},e.name))})),Object(b.jsxs)("div",{children:[Object(b.jsxs)(x.a,{children:[Object(b.jsx)(_.a.Control,{as:"select",defaultValue:s.placeholder,onChange:function(n){s.spawn_fields?a.addAdditionalField(e,t,s.options.find((function(e){return e.name===n.target.value})).typename,n):a.handleChangeFields(e,t,n)},children:c}),s.required&&Object(b.jsxs)(x.a.Append,{children:[Object(b.jsx)(x.a.Text,{children:"Ignore:"}),Object(b.jsx)(x.a.Checkbox,{"aria-label":"Force null for this field",onChange:function(n){a.handleIgnoreProperty(e,t,n)}})]})]}),r]},e)}return Object(b.jsxs)(x.a,{children:[Object(b.jsx)(_.a.Control,{isValid:null!==this.state[t][e].validity&&this.state[t][e].validity,isInvalid:null!==this.state[t][e].validity&&!this.state[t][e].validity,type:s.field,placeholder:e,defaultValue:this.state[t][e].defaultValue,onChange:function(n){a.handleChangeFields(e,t,n)}}),s.required&&Object(b.jsxs)(x.a.Append,{children:[Object(b.jsx)(x.a.Text,{children:"Ignore:"}),Object(b.jsx)(x.a.Checkbox,{"aria-label":"Force null for this field",onChange:function(n){a.handleIgnoreProperty(e,t,n)}})]})]},e)}},{key:"render",value:function(){var e=this,t=this.state.action,n=[],a=[];Object.keys(this.state.parameters).forEach((function(t){n.push(e.create_field(t,"parameters",e.state.parameters[t].datatype,e.props.schema.__types))})),Object.keys(this.state.data).forEach((function(t){a.push(e.create_field(t,"data",e.state.data[t].datatype,e.props.schema.__types))})),n.length&&n.unshift(Object(b.jsx)("strong",{children:"Parameters:"},"param_title")),a.length&&a.unshift(Object(b.jsx)("strong",{children:"Data:"},"data_title"));var i=this.state.query,s=this.state.response;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(O.a.Header,{closeButton:!0,children:Object(b.jsx)(O.a.Title,{children:t.name})}),Object(b.jsx)(O.a.Body,{className:"container-fluid",children:Object(b.jsxs)(p.a,{className:"container-fluid d-flex h-100 overflow-hidden p-1",children:[Object(b.jsx)(f.a,{sm:5,className:"h-100 flex-column",children:Object(b.jsxs)(_.a,{className:"flex-grow-1 h-100",noValidate:!0,children:[n,a]})}),Object(b.jsx)(f.a,{sm:7,className:"pb-1",children:Object(b.jsx)(_.a,{className:"h-100 flex-column modal-tabs",noValidate:!0,children:Object(b.jsxs)(k.a,{variant:"pills",defaultActiveKey:"query",transition:!1,className:"nav-fill",children:[Object(b.jsx)(S.a,{eventKey:"query",title:"Query:",children:Object(b.jsx)(C.a,{as:"textarea",className:"no-resize border-right",value:i,onChange:this.handleChangeQuery,onKeyDown:this.capture_tab})}),Object(b.jsx)(S.a,{eventKey:"response",title:"Response:",children:Object(b.jsx)(C.a,{readOnly:!0,as:"textarea",className:"no-resize border-right",value:s})}),Object(b.jsx)(S.a,{eventKey:"listView",title:"List view:"})]})})})]})}),Object(b.jsxs)(O.a.Footer,{children:[Object(b.jsx)(y.a,{variant:"primary",onClick:function(){e.update_response(e.state.query)},children:"TEST"}),Object(b.jsx)(y.a,{variant:"primary",onClick:this.send_query,children:"Query"}),Object(b.jsx)(y.a,{variant:"primary",onClick:this.send_mutation,children:"Mutation"})]})]})}}]),n}(i.a.Component),M=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={activeObject:null},a.changeObject=a.changeObject.bind(Object(l.a)(a)),a}return Object(o.a)(n,[{key:"changeObject",value:function(e){this.setState({activeObject:e})}},{key:"render",value:function(){return Object(b.jsxs)(p.a,{className:"flex-grow-1 overflow-hidden",children:[Object(b.jsx)(f.a,{sm:2,className:"bg-secondary pl-4 mh-100",children:Object(b.jsx)(H,{activeChange:this.changeObject,schema:this.props.schema})}),Object(b.jsxs)(f.a,{sm:10,className:"overflow-auto py-2 mh-100",children:[Object(b.jsx)(V,{path:["Objects",this.state.activeObject]}),Object(b.jsx)(Q,{object:this.state.activeObject,schema:this.props.schema})]})]})}}]),n}(i.a.Component),X=n(95),z=n(97),G=n(72),W=n(98),Y=n(91),Z=n(92),$=(n(81),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={navbarKey:"Objects",login_text:""},a.loginTextHandler=a.loginTextHandler.bind(Object(l.a)(a)),a.loginButton=a.loginButton.bind(Object(l.a)(a)),a.maybeSubmit=a.maybeSubmit.bind(Object(l.a)(a)),a}return Object(o.a)(n,[{key:"loginTextHandler",value:function(e){this.setState({login_text:e.target.value})}},{key:"loginButton",value:function(){this.props.login_fn(this.state.login_text)}},{key:"changeView",value:function(e){this.setState({navbarKey:e}),this.props.viewChange(e)}},{key:"maybeSubmit",value:function(e){"Enter"===e.key&&this.loginButton()}},{key:"make_quickLogin",value:function(e){var t=this,n=e,a="login_";return null===e?(n=Object(b.jsx)("em",{children:"Anonymous"}),a+="anonymous"):a+=e,e===this.props.current_user&&(n=Object(b.jsx)("strong",{children:n})),Object(b.jsx)(X.a.Item,{onClick:function(){t.props.current_user!==e&&t.props.login_fn(e)},children:n},a)}},{key:"render",value:function(){var e=this,t=[];this.props.logins.forEach((function(n){t.push(e.make_quickLogin(n))}));var n=null===this.props.current_user;return Object(b.jsxs)(z.a,{variant:"dark",expand:"lg",className:"navbar-expand-lg text-white navbar-expand bg-primary",children:[Object(b.jsxs)("div",{className:"navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2",children:[Object(b.jsx)(z.a.Brand,{href:"https://www.github.com/karlosss/simple_api",children:"Simple-API"}),Object(b.jsx)("div",{className:"collapse navbar-collapse",children:Object(b.jsxs)(G.a,{variant:"pills",activeKey:this.state.navbarKey,children:[Object(b.jsx)(G.a.Link,{onClick:function(){e.changeView("objects")},eventKey:"objects",children:"Objects"}),Object(b.jsx)(G.a.Link,{onClick:function(){e.changeView("actions")},eventKey:"actions",children:"Actions"})]})})]}),Object(b.jsx)("div",{className:"collapse navbar-collapse pe-4",children:Object(b.jsxs)("ul",{className:"navbar-nav me-auto ms-auto",children:[Object(b.jsx)(W.a,{placement:"left",delay:{show:250,hide:400},overlay:Object(b.jsxs)(Y.a,{id:"tooltip",children:[Object(b.jsx)("strong",{children:this.props.connected?"Succesfully fetched schema from API":"Failed to fetch schema from API"}),"."]}),children:this.props.connected?Object(b.jsx)("i",{className:"bi bi-check connected-icon text-success"}):Object(b.jsx)("i",{className:"bi bi-x connected-icon text-danger"})}),Object(b.jsxs)(X.a,{children:[Object(b.jsx)(X.a.Toggle,{id:"login-dropdown",className:"nav-link text-white",children:n?"Anonymous":this.props.current_user}),Object(b.jsxs)(X.a.Menu,{className:"dropdown-menu large-dropdown","aria-labelledby":"navbarDropdown",alignRight:!0,children:[n?Object(b.jsx)(b.Fragment,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(X.a.Item,{onClick:function(){return e.props.logout_fn(e.props.current_user)},children:"Logout Current User"}),Object(b.jsx)(X.a.Divider,{})]}),Object(b.jsx)("label",{className:"px-4",children:"Login:"}),Object(b.jsxs)(x.a,{className:"mb-3 px-4",children:[Object(b.jsx)(C.a,{placeholder:"Username","aria-label":"Username to login as","aria-describedby":"basic-addon2",value:this.state.login_text,onChange:this.loginTextHandler,onKeyDown:this.maybeSubmit}),Object(b.jsx)(x.a.Append,{children:Object(b.jsx)(y.a,{onClick:this.loginButton,variant:"outline-primary",type:"submit",children:"Login"})})]}),Object(b.jsx)(X.a.Divider,{}),t,Object(b.jsx)(X.a.Divider,{}),Object(b.jsx)(X.a.Item,{onClick:this.props.logout_fn_all,children:"Logout All"})]})]})]})})]})}}]),n}(i.a.Component)),ee=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{children:Object(b.jsx)(j.a,{children:Object(b.jsx)(j.a.Body,{children:'Hi! I\'m the frontpage, click above on "Objects" or "Actions" to start exploring your API'})})})}}]),n}(i.a.Component),te=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(c.a)(this,n),a=t.call(this,e);var i={frontpage:ee,objects:M,actions:v},s=[null];return B("savedLogins")?s=JSON.parse(B("savedLogins")):J("savedLogins",JSON.stringify(s)),a.state={activeView:ee,windows:i,logins:s,current_user:null,schema:null,errors:null},a.reloadSchema(),a.changeView=a.changeView.bind(Object(l.a)(a)),a.changeUser=a.changeUser.bind(Object(l.a)(a)),a.logoutUser=a.logoutUser.bind(Object(l.a)(a)),a.logoutAll=a.logoutAll.bind(Object(l.a)(a)),a}return Object(o.a)(n,[{key:"reloadSchema",value:function(){var e,t,n=this;e=function(e){n.setState({schema:e})},E("\n    {\n      __types{\n        typename\n        fields{\n          name\n          typename\n        }\n      }\n      __objects{\n        name\n        pk_field\n        actions{\n          name\n          parameters{\n            name\n            typename\n            default\n          }\n          data{\n            name\n            typename\n            default\n          }\n          return_type\n          permitted\n          deny_reason\n          retry_in\n        }\n      }\n    __actions{\n      name\n      parameters{\n        name\n        typename\n        default\n      }\n      data{\n        name\n        typename\n        default\n      }\n      return_type\n      permitted\n      deny_reason\n      retry_in\n    }\n}",(function(n){void 0!==n?e(n.data):t(n)}),t=function(e){console.log(e),n.setState({schema:null})})}},{key:"changeView",value:function(e){this.reloadSchema(),console.log(this.state.schema),this.setState({activeView:this.state.windows[e]})}},{key:"changeUser",value:function(e){if(!this.state.logins.includes(e)){var t=this.state.logins.concat(e);this.setState({logins:t}),J("savedLogins",JSON.stringify(t))}this.setState({current_user:e})}},{key:"logoutUser",value:function(e){if(null!==e){e===this.state.current_user&&this.setState({current_user:null});var t=this.state.logins.filter((function(t){return t!==e}));this.setState({logins:t}),J("savedLogins",JSON.stringify(t))}}},{key:"logoutAll",value:function(){this.setState({logins:[null],current_user:null}),J("savedLogins",JSON.stringify([null]))}},{key:"render",value:function(){var e=this,t=this.state.activeView;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)($,{viewChange:this.changeView,logins:this.state.logins,login_fn:function(t){!function(e,t,n){fetch("./login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":K()},credentials:"include",body:JSON.stringify({username:e,operation:"login"})}).then((function(e){return e.json()})).then((function(a){return P(e,a,t,n)})).catch((function(e){return n(e.text)}))}(t,e.changeUser,console.log)},logout_fn:function(t){D(t,e.logoutUser,console.log)},logout_fn_all:function(){D(e.state.current_user,e.logoutAll,console.log)},current_user:this.state.current_user,connected:null!==this.state.schema}),Object(b.jsx)(t,{schema:this.state.schema})]})}}]),n}(i.a.Component),ne=function(){return Object(b.jsx)(Z.a,{fluid:!0,className:"container-fluid d-flex flex-column vh-100 overflow-hidden p-0",children:Object(b.jsx)(te,{})})};n(82);r.a.render(Object(b.jsx)(ne,{}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.c4d3a002.chunk.js.map